#Introduction

This handbook describes the process of running a CellPainting experiment.
While the code here will describe doing so in the context of running Distributed-CellProfiler on AWS on images generated by a Perkin Elmer microscope, 
then collating the data with cytominer-database and analyzing it with pycytominer, the basic procedure for running a CellPainting experiment is the same 
no matter the microscope or the processing platform.  Briefly, the steps are 

## Collect your software (all platforms and microscopes) 

For the specific use case here, this involves Distributed-CellProfiler, pe2loaddata, cytominer-database, and pycytominer tools with their dependencies. 
Almost certainly, you will need a locally-to-your-images installed version of GUI CellProfiler that matches the version you want to run on your cluster - locally might mean on a local machine or a VM.

## Collect your pipelines (all platforms and microscopes)

You will minimally require an illum and an analysis pipeline, but may also want Z projection and/or qc and/or assay development pipelines.

## Determine how to get your image lists to CellProfiler (all platforms and microscopes)

CellProfiler needs to understand image sets, aka for each field of view that was captured how many channels were there, what would you like to name the channels were there, and what are the file names correspnding to each channel.
If you are using a Phenix Opera or Operetta, you can use the pe2loaddata program to generate a CSV that contains a list of image sets in an automated fashion, which can be passed to CellProfiler in via the LoadData module.
Otherwise, you have a couple of different options - 
1) You can create a similar CSV using a script that you write yourself that handles the files from your microscope and makes a similar CSV- minimally, you need a `FileName` and `PathName` column for each channel (ie `FileName_OrigDNA`), and Metadata columns for each piece of metadata CellProfiler needs (ie `Metadata_Plate`, `Metadata_Well`, and `Metadata_Site`)
2) You can use a local copy of the files CellProfiler will be running, configure the 4 input modules of CellProfiler to create your image sets, then export CSVs using CellProfiler's "Export Image Set Listing" option, and feed those into the pipelines to be run on your cluster.
3) Alter all of your pipelines to, rather than the LoadData CSV module, use the 4 input modules of CellProfiler and add, configure, and run each pipeline with the CreateBatchFiles module and use batch files in your cluster environment.
These options are ordered in terms of most-scripting-proficiency-needed to least-scripting-proficiency-needed as well as least-CellProfiler-proficiency-needed to most-CellProfiler-proficiency-needed.
